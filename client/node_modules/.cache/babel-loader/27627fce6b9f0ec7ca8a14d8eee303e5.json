{"ast":null,"code":"var _jsxFileName = \"/Users/kamil.muzyka/Desktop/podcastify/src/components/Workspace/Shows/Show/Show.js\";\nimport React, { useState, useEffect, useContext, Fragment } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { SEARCH_TYPES } from '../../../../constants';\nimport { PlayerContext } from '../../../../contexts/PlayerContextProvider';\nimport Spotify from '../../../../models/Spotify';\nimport extractId from '../../../../utils/extractId';\nimport WorkspaceLoading from '../../WorkspaceLoading/WorkspaceLoading';\nimport Details from '../../Details/Details';\nimport EpisodesList from '../../Episodes/EpisodesList/EpisodesList';\n\nconst Show = ({\n  location\n}) => {\n  const SHOW_ID = extractId(location.pathname);\n  const [details, updateDetails] = useState({});\n  const [library, updateLibrary] = useState({});\n  const {\n    updateQueue\n  } = useContext(PlayerContext);\n  const [status, updateStatus] = useState(0);\n  const [isLoading, updateIsLoading] = useState(true);\n\n  const handleShowFollow = id => {\n    Spotify.saveUserShow(id);\n    updateStatus(prev => prev + 1);\n  };\n\n  const handleShowUnfollow = id => {\n    Spotify.removeUserShow(id);\n    updateStatus(prev => prev + 1);\n  };\n\n  useEffect(() => {\n    (async () => {\n      try {\n        if (Object.keys(details).length === 0) {\n          const [show, inLibrary] = await Promise.all([Spotify.getShowDetails(SHOW_ID), Spotify.checkUserShow(SHOW_ID)]);\n          updateDetails({\n            name: show.name,\n            showId: show.id,\n            description: show.description,\n            external: show.external_urls.spotify,\n            type: SEARCH_TYPES.show,\n            publisher: show.publisher,\n            image: show.images[1].url,\n            episodes: show.episodes,\n            updateQueue\n          });\n          updateLibrary({\n            inLibrary,\n            addToLibraryText: 'Follow',\n            removeFromLibraryText: 'Unfollow',\n            addToLibrary: () => handleShowFollow(SHOW_ID),\n            removeFromLibrary: () => handleShowUnfollow(SHOW_ID)\n          });\n        } else {\n          const inLibrary = await Spotify.checkUserShow(SHOW_ID);\n          updateLibrary(prev => {\n            return { ...prev,\n              inLibrary\n            };\n          });\n        }\n\n        updateIsLoading(false);\n      } catch (err) {\n        throw new Error(err);\n      }\n    })();\n  }, [SHOW_ID, status]);\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Details, {\n    details: details,\n    library: library,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(EpisodesList, {\n    episodes: details.episodes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(WorkspaceLoading, {\n    loading: isLoading.toString(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default withRouter(Show);","map":{"version":3,"sources":["/Users/kamil.muzyka/Desktop/podcastify/src/components/Workspace/Shows/Show/Show.js"],"names":["React","useState","useEffect","useContext","Fragment","withRouter","SEARCH_TYPES","PlayerContext","Spotify","extractId","WorkspaceLoading","Details","EpisodesList","Show","location","SHOW_ID","pathname","details","updateDetails","library","updateLibrary","updateQueue","status","updateStatus","isLoading","updateIsLoading","handleShowFollow","id","saveUserShow","prev","handleShowUnfollow","removeUserShow","Object","keys","length","show","inLibrary","Promise","all","getShowDetails","checkUserShow","name","showId","description","external","external_urls","spotify","type","publisher","image","images","url","episodes","addToLibraryText","removeFromLibraryText","addToLibrary","removeFromLibrary","err","Error","toString"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext, Fragment } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { SEARCH_TYPES } from '../../../../constants';\nimport { PlayerContext } from '../../../../contexts/PlayerContextProvider';\nimport Spotify from '../../../../models/Spotify';\nimport extractId from '../../../../utils/extractId';\nimport WorkspaceLoading from '../../WorkspaceLoading/WorkspaceLoading';\nimport Details from '../../Details/Details';\nimport EpisodesList from '../../Episodes/EpisodesList/EpisodesList';\n\nconst Show = ({ location }) => {\n    const SHOW_ID = extractId(location.pathname);\n    const [details, updateDetails] = useState({});\n    const [library, updateLibrary] = useState({});\n    const { updateQueue } = useContext(PlayerContext);\n    const [status, updateStatus] = useState(0);\n    const [isLoading, updateIsLoading] = useState(true);\n\n    const handleShowFollow = (id) => {\n        Spotify.saveUserShow(id);\n        updateStatus((prev) => prev + 1);\n    };\n\n    const handleShowUnfollow = (id) => {\n        Spotify.removeUserShow(id);\n        updateStatus((prev) => prev + 1);\n    };\n\n    useEffect(() => {\n        (async () => {\n            try {\n                if(Object.keys(details).length === 0) {\n                    const [show, inLibrary] = await Promise.all([\n                        Spotify.getShowDetails(SHOW_ID),\n                        Spotify.checkUserShow(SHOW_ID)\n                    ]);\n                    updateDetails({\n                        name: show.name,\n                        showId: show.id,\n                        description: show.description,\n                        external: show.external_urls.spotify,\n                        type: SEARCH_TYPES.show,\n                        publisher: show.publisher,\n                        image: show.images[1].url,\n                        episodes: show.episodes,\n                        updateQueue\n                    });\n                    updateLibrary({\n                        inLibrary,\n                        addToLibraryText: 'Follow',\n                        removeFromLibraryText: 'Unfollow',\n                        addToLibrary: () => handleShowFollow(SHOW_ID),\n                        removeFromLibrary: () => handleShowUnfollow(SHOW_ID)\n                    });\n                } else {\n                    const inLibrary = await Spotify.checkUserShow(SHOW_ID);\n                    updateLibrary((prev) => {\n                        return {\n                            ...prev,\n                            inLibrary\n                        }\n                    });\n                }\n                updateIsLoading(false);\n            } catch(err) {\n                throw new Error(err);\n            }\n        })();\n    }, [SHOW_ID, status]);\n\n    return (\n        <Fragment>\n            <Details details={details} library={library}/>\n            <EpisodesList episodes={details.episodes}/>\n            <WorkspaceLoading loading={isLoading.toString()}/>\n        </Fragment>\n    );\n}\n\nexport default withRouter(Show);"]},"metadata":{},"sourceType":"module"}