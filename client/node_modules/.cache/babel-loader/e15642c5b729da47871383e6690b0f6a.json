{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kamil.muzyka/Desktop/podcastify/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kamil.muzyka/Desktop/podcastify/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/kamil.muzyka/Desktop/podcastify/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{createContext,useState,useContext}from'react';import{QueueContext}from'./QueueContextProvider';export var PlayerContext=createContext();var PlayerContextProvider=function PlayerContextProvider(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isPlaying=_useState2[0],updateIsPlaying=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),audio=_useState4[0],updateAudio=_useState4[1];var _useContext=useContext(QueueContext),currentEpisode=_useContext.currentEpisode,loadQueueNext=_useContext.loadQueueNext,loadQueuePrevious=_useContext.loadQueuePrevious;var startPlaying=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var playPromise;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(audio&&currentEpisode)){_context.next=6;break;}updateIsPlaying(true);playPromise=audio.play();if(!(playPromise!==undefined)){_context.next=6;break;}_context.next=6;return playPromise;case 6:case\"end\":return _context.stop();}}},_callee);}));return function startPlaying(){return _ref.apply(this,arguments);};}();var stopPlaying=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var pausePromise;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(audio&&currentEpisode)){_context2.next=6;break;}updateIsPlaying(false);pausePromise=audio.pause();if(!(pausePromise!==undefined)){_context2.next=6;break;}_context2.next=6;return pausePromise;case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function stopPlaying(){return _ref2.apply(this,arguments);};}();var resetPlayer=function resetPlayer(){if(audio&&currentEpisode){stopPlaying();audio.currentTime=0;startPlaying();}};var playNext=function playNext(){loadQueueNext();};var playPrevious=function playPrevious(){loadQueuePrevious();};return/*#__PURE__*/React.createElement(PlayerContext.Provider,{value:{isPlaying:isPlaying,updateAudio:updateAudio,startPlaying:startPlaying,stopPlaying:stopPlaying,playNext:playNext,playPrevious:playPrevious,resetPlayer:resetPlayer}},props.children);};export default PlayerContextProvider;","map":{"version":3,"sources":["/Users/kamil.muzyka/Desktop/podcastify/src/contexts/PlayerContextProvider.js"],"names":["React","createContext","useState","useContext","QueueContext","PlayerContext","PlayerContextProvider","props","isPlaying","updateIsPlaying","audio","updateAudio","currentEpisode","loadQueueNext","loadQueuePrevious","startPlaying","playPromise","play","undefined","stopPlaying","pausePromise","pause","resetPlayer","currentTime","playNext","playPrevious","children"],"mappings":"odAAA,MAAOA,CAAAA,KAAP,EAAgBC,aAAhB,CAA+BC,QAA/B,CAAyCC,UAAzC,KAA2D,OAA3D,CACA,OAASC,YAAT,KAA6B,wBAA7B,CAEA,MAAO,IAAMC,CAAAA,aAAa,CAAGJ,aAAa,EAAnC,CAEP,GAAMK,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACC,KAAD,CAAW,eACAL,QAAQ,CAAC,KAAD,CADR,wCAC9BM,SAD8B,eACnBC,eADmB,8BAERP,QAAQ,EAFA,yCAE9BQ,KAF8B,eAEvBC,WAFuB,+BAGwBR,UAAU,CAACC,YAAD,CAHlC,CAG7BQ,cAH6B,aAG7BA,cAH6B,CAGbC,aAHa,aAGbA,aAHa,CAGEC,iBAHF,aAGEA,iBAHF,CAKrC,GAAMC,CAAAA,YAAY,0FAAG,wJACbL,KAAK,EAAIE,cADI,0BAEbH,eAAe,CAAC,IAAD,CAAf,CACMO,WAHO,CAGON,KAAK,CAACO,IAAN,EAHP,MAITD,WAAW,GAAKE,SAJP,gDAKHF,CAAAA,WALG,uDAAH,kBAAZD,CAAAA,YAAY,0CAAlB,CAUA,GAAMI,CAAAA,WAAW,2FAAG,8JACZT,KAAK,EAAIE,cADG,2BAEZH,eAAe,CAAC,KAAD,CAAf,CACMW,YAHM,CAGSV,KAAK,CAACW,KAAN,EAHT,MAIRD,YAAY,GAAKF,SAJT,kDAKFE,CAAAA,YALE,yDAAH,kBAAXD,CAAAA,WAAW,2CAAjB,CAUA,GAAMG,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB,GAAIZ,KAAK,EAAIE,cAAb,CAA6B,CACzBO,WAAW,GACXT,KAAK,CAACa,WAAN,CAAoB,CAApB,CACAR,YAAY,GACf,CACJ,CAND,CAQA,GAAMS,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACnBX,aAAa,GAChB,CAFD,CAIA,GAAMY,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvBX,iBAAiB,GACpB,CAFD,CAIA,mBACI,oBAAC,aAAD,CAAe,QAAf,EAAwB,KAAK,CAAE,CAC3BN,SAAS,CAATA,SAD2B,CAE3BG,WAAW,CAAXA,WAF2B,CAG3BI,YAAY,CAAZA,YAH2B,CAI3BI,WAAW,CAAXA,WAJ2B,CAK3BK,QAAQ,CAARA,QAL2B,CAM3BC,YAAY,CAAZA,YAN2B,CAO3BH,WAAW,CAAXA,WAP2B,CAA/B,EASKf,KAAK,CAACmB,QATX,CADJ,CAaH,CAtDD,CAwDA,cAAepB,CAAAA,qBAAf","sourcesContent":["import React, { createContext, useState, useContext } from 'react';\nimport { QueueContext } from './QueueContextProvider';\n\nexport const PlayerContext = createContext();\n\nconst PlayerContextProvider = (props) => {\n    const [isPlaying, updateIsPlaying] = useState(false);\n    const [audio, updateAudio] = useState();\n    const { currentEpisode, loadQueueNext, loadQueuePrevious } = useContext(QueueContext);\n\n    const startPlaying = async () => {\n        if (audio && currentEpisode) {\n            updateIsPlaying(true);\n            const playPromise = audio.play();\n            if (playPromise !== undefined) {\n                await playPromise;\n            }\n        }\n    }\n\n    const stopPlaying = async () => {\n        if (audio && currentEpisode) {\n            updateIsPlaying(false);\n            const pausePromise = audio.pause();\n            if (pausePromise !== undefined) {\n                await pausePromise;\n            }\n        }\n    }\n\n    const resetPlayer = () => {\n        if (audio && currentEpisode) {\n            stopPlaying();\n            audio.currentTime = 0;\n            startPlaying();\n        }\n    }\n\n    const playNext = () => {\n        loadQueueNext();\n    }\n\n    const playPrevious = () => {\n        loadQueuePrevious();\n    }\n\n    return (\n        <PlayerContext.Provider value={{\n            isPlaying,\n            updateAudio,\n            startPlaying,\n            stopPlaying,\n            playNext,\n            playPrevious,\n            resetPlayer\n        }}>\n            {props.children}\n        </PlayerContext.Provider>\n    );\n}\n\nexport default PlayerContextProvider;"]},"metadata":{},"sourceType":"module"}