{"ast":null,"code":"const settings = {\n  clientID: 'c9587c71088b4ad78b3f54fda5ba1544',\n  redirectURI: 'http://localhost:3000/',\n  scope: encodeURIComponent('user-read-private user-read-email user-follow-read user-follow-modify user-library-read user-library-modify')\n};\n\nclass Auth {\n  static logIn() {\n    const params = new URLSearchParams({\n      client_id: settings.clientID,\n      redirect_uri: settings.redirectURI,\n      scope: settings.scope,\n      response_type: 'token'\n    }).toString();\n    window.location.href = 'https://accounts.spotify.com/authorize?' + params;\n  }\n\n  static logOut() {\n    localStorage.removeItem('access');\n    window.location.href = '/';\n  }\n\n  static check() {\n    function accessDataAvailable() {\n      const access = JSON.parse(localStorage.getItem('access'));\n\n      if (access) {\n        const expires = access.expires;\n        const now = Date.now();\n        return now < expires;\n      }\n\n      return false;\n    }\n\n    function hashAvailable() {\n      const hash = window.location.hash;\n      return hash ? true : false;\n    }\n\n    if (accessDataAvailable()) {\n      return true;\n    }\n\n    if (hashAvailable()) {\n      const hash = window.location.hash;\n      const replaced = hash.replace('#', '?');\n      const params = new URLSearchParams(replaced);\n      const token = params.get('access_token');\n      const expiresAddOn = params.get('expires_in') * 1000;\n      const expiresBase = Date.now();\n      const expires = expiresBase + expiresAddOn;\n      localStorage.setItem('access', JSON.stringify({\n        token,\n        expires\n      }));\n      return true;\n    }\n\n    return false;\n  }\n\n}\n\nexport default Auth;","map":{"version":3,"sources":["/Users/kamil.muzyka/Desktop/podcastify/src/controllers/Auth.js"],"names":["settings","clientID","redirectURI","scope","encodeURIComponent","Auth","logIn","params","URLSearchParams","client_id","redirect_uri","response_type","toString","window","location","href","logOut","localStorage","removeItem","check","accessDataAvailable","access","JSON","parse","getItem","expires","now","Date","hashAvailable","hash","replaced","replace","token","get","expiresAddOn","expiresBase","setItem","stringify"],"mappings":"AAAA,MAAMA,QAAQ,GAAG;AACbC,EAAAA,QAAQ,EAAE,kCADG;AAEbC,EAAAA,WAAW,EAAE,wBAFA;AAGbC,EAAAA,KAAK,EAAEC,kBAAkB,CAAC,6GAAD;AAHZ,CAAjB;;AAMA,MAAMC,IAAN,CAAW;AACP,SAAOC,KAAP,GAAe;AACX,UAAMC,MAAM,GAAG,IAAIC,eAAJ,CAAoB;AAC/BC,MAAAA,SAAS,EAAET,QAAQ,CAACC,QADW;AAE/BS,MAAAA,YAAY,EAAEV,QAAQ,CAACE,WAFQ;AAG/BC,MAAAA,KAAK,EAAEH,QAAQ,CAACG,KAHe;AAI/BQ,MAAAA,aAAa,EAAE;AAJgB,KAApB,EAKZC,QALY,EAAf;AAMAC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,4CAA4CR,MAAnE;AACH;;AAED,SAAOS,MAAP,GAAgB;AACZC,IAAAA,YAAY,CAACC,UAAb,CAAwB,QAAxB;AACAL,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACH;;AAED,SAAOI,KAAP,GAAe;AACX,aAASC,mBAAT,GAA+B;AAC3B,YAAMC,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWN,YAAY,CAACO,OAAb,CAAqB,QAArB,CAAX,CAAf;;AACA,UAAIH,MAAJ,EAAY;AACR,cAAMI,OAAO,GAAGJ,MAAM,CAACI,OAAvB;AACA,cAAMC,GAAG,GAAGC,IAAI,CAACD,GAAL,EAAZ;AACA,eAAOA,GAAG,GAAGD,OAAb;AACH;;AACD,aAAO,KAAP;AACH;;AAED,aAASG,aAAT,GAAyB;AACrB,YAAMC,IAAI,GAAGhB,MAAM,CAACC,QAAP,CAAgBe,IAA7B;AACA,aAAOA,IAAI,GAAG,IAAH,GAAU,KAArB;AACH;;AAED,QAAIT,mBAAmB,EAAvB,EAA2B;AACvB,aAAO,IAAP;AACH;;AAED,QAAIQ,aAAa,EAAjB,EAAqB;AACjB,YAAMC,IAAI,GAAGhB,MAAM,CAACC,QAAP,CAAgBe,IAA7B;AACA,YAAMC,QAAQ,GAAGD,IAAI,CAACE,OAAL,CAAa,GAAb,EAAkB,GAAlB,CAAjB;AACA,YAAMxB,MAAM,GAAG,IAAIC,eAAJ,CAAoBsB,QAApB,CAAf;AACA,YAAME,KAAK,GAAGzB,MAAM,CAAC0B,GAAP,CAAW,cAAX,CAAd;AACA,YAAMC,YAAY,GAAG3B,MAAM,CAAC0B,GAAP,CAAW,YAAX,IAA2B,IAAhD;AACA,YAAME,WAAW,GAAGR,IAAI,CAACD,GAAL,EAApB;AACA,YAAMD,OAAO,GAAGU,WAAW,GAAGD,YAA9B;AACAjB,MAAAA,YAAY,CAACmB,OAAb,CAAqB,QAArB,EAA+Bd,IAAI,CAACe,SAAL,CAAe;AAC1CL,QAAAA,KAD0C;AAE1CP,QAAAA;AAF0C,OAAf,CAA/B;AAIA,aAAO,IAAP;AACH;;AAED,WAAO,KAAP;AACH;;AApDM;;AAuDX,eAAepB,IAAf","sourcesContent":["const settings = {\n    clientID: 'c9587c71088b4ad78b3f54fda5ba1544',\n    redirectURI: 'http://localhost:3000/',\n    scope: encodeURIComponent('user-read-private user-read-email user-follow-read user-follow-modify user-library-read user-library-modify')\n}\n\nclass Auth {\n    static logIn() {\n        const params = new URLSearchParams({\n            client_id: settings.clientID,\n            redirect_uri: settings.redirectURI,\n            scope: settings.scope,\n            response_type: 'token'\n        }).toString();\n        window.location.href = 'https://accounts.spotify.com/authorize?' + params;\n    }\n\n    static logOut() {\n        localStorage.removeItem('access');\n        window.location.href = '/';\n    }\n\n    static check() {\n        function accessDataAvailable() {\n            const access = JSON.parse(localStorage.getItem('access'));\n            if (access) {\n                const expires = access.expires;\n                const now = Date.now();\n                return now < expires;\n            }\n            return false;\n        }\n\n        function hashAvailable() {\n            const hash = window.location.hash;\n            return hash ? true : false;\n        }\n\n        if (accessDataAvailable()) {\n            return true;\n        }\n\n        if (hashAvailable()) {\n            const hash = window.location.hash;\n            const replaced = hash.replace('#', '?');\n            const params = new URLSearchParams(replaced);\n            const token = params.get('access_token');\n            const expiresAddOn = params.get('expires_in') * 1000;\n            const expiresBase = Date.now();\n            const expires = expiresBase + expiresAddOn;\n            localStorage.setItem('access', JSON.stringify({\n                token,\n                expires\n            }));\n            return true;\n        }\n\n        return false;\n    }\n}\n\nexport default Auth;"]},"metadata":{},"sourceType":"module"}