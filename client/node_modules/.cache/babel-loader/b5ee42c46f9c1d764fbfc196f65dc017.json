{"ast":null,"code":"import _classCallCheck from\"/Users/kamil.muzyka/Desktop/podcastify/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kamil.muzyka/Desktop/podcastify/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";var settings={clientID:'c9587c71088b4ad78b3f54fda5ba1544',redirectURI:'http://localhost:3000/',scope:encodeURIComponent('user-read-private user-read-email user-follow-read user-follow-modify user-library-read user-library-modify')};var Auth=/*#__PURE__*/function(){function Auth(){_classCallCheck(this,Auth);}_createClass(Auth,null,[{key:\"logIn\",value:function logIn(){var params=new URLSearchParams({client_id:settings.clientID,redirect_uri:settings.redirectURI,scope:settings.scope,response_type:'token'}).toString();window.location.href='https://accounts.spotify.com/authorize?'+params;}},{key:\"logOut\",value:function logOut(){localStorage.removeItem('access');window.location.href='/';}},{key:\"check\",value:function check(){function accessDataAvailable(){var access=JSON.parse(localStorage.getItem('access'));if(access){var expires=access.expires;var now=Date.now();return now<expires;}return false;}function hashAvailable(){var hash=window.location.hash;return hash?true:false;}if(accessDataAvailable()){return true;}if(hashAvailable()){var hash=window.location.hash;var replaced=hash.replace('#','?');var params=new URLSearchParams(replaced);var token=params.get('access_token');var expiresAddOn=params.get('expires_in')*1000;var expiresBase=Date.now();var expires=expiresBase+expiresAddOn;localStorage.setItem('access',JSON.stringify({token:token,expires:expires}));return true;}return false;}}]);return Auth;}();export default Auth;","map":{"version":3,"sources":["/Users/kamil.muzyka/Desktop/podcastify/src/controllers/Auth.js"],"names":["settings","clientID","redirectURI","scope","encodeURIComponent","Auth","params","URLSearchParams","client_id","redirect_uri","response_type","toString","window","location","href","localStorage","removeItem","accessDataAvailable","access","JSON","parse","getItem","expires","now","Date","hashAvailable","hash","replaced","replace","token","get","expiresAddOn","expiresBase","setItem","stringify"],"mappings":"wTAAA,GAAMA,CAAAA,QAAQ,CAAG,CACbC,QAAQ,CAAE,kCADG,CAEbC,WAAW,CAAE,wBAFA,CAGbC,KAAK,CAAEC,kBAAkB,CAAC,6GAAD,CAHZ,CAAjB,C,GAMMC,CAAAA,I,gIACa,CACX,GAAMC,CAAAA,MAAM,CAAG,GAAIC,CAAAA,eAAJ,CAAoB,CAC/BC,SAAS,CAAER,QAAQ,CAACC,QADW,CAE/BQ,YAAY,CAAET,QAAQ,CAACE,WAFQ,CAG/BC,KAAK,CAAEH,QAAQ,CAACG,KAHe,CAI/BO,aAAa,CAAE,OAJgB,CAApB,EAKZC,QALY,EAAf,CAMAC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,0CAA4CR,MAAnE,CACH,C,uCAEe,CACZS,YAAY,CAACC,UAAb,CAAwB,QAAxB,EACAJ,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,GAAvB,CACH,C,qCAEc,CACX,QAASG,CAAAA,mBAAT,EAA+B,CAC3B,GAAMC,CAAAA,MAAM,CAAGC,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACM,OAAb,CAAqB,QAArB,CAAX,CAAf,CACA,GAAIH,MAAJ,CAAY,CACR,GAAMI,CAAAA,OAAO,CAAGJ,MAAM,CAACI,OAAvB,CACA,GAAMC,CAAAA,GAAG,CAAGC,IAAI,CAACD,GAAL,EAAZ,CACA,MAAOA,CAAAA,GAAG,CAAGD,OAAb,CACH,CACD,MAAO,MAAP,CACH,CAED,QAASG,CAAAA,aAAT,EAAyB,CACrB,GAAMC,CAAAA,IAAI,CAAGd,MAAM,CAACC,QAAP,CAAgBa,IAA7B,CACA,MAAOA,CAAAA,IAAI,CAAG,IAAH,CAAU,KAArB,CACH,CAED,GAAIT,mBAAmB,EAAvB,CAA2B,CACvB,MAAO,KAAP,CACH,CAED,GAAIQ,aAAa,EAAjB,CAAqB,CACjB,GAAMC,CAAAA,IAAI,CAAGd,MAAM,CAACC,QAAP,CAAgBa,IAA7B,CACA,GAAMC,CAAAA,QAAQ,CAAGD,IAAI,CAACE,OAAL,CAAa,GAAb,CAAkB,GAAlB,CAAjB,CACA,GAAMtB,CAAAA,MAAM,CAAG,GAAIC,CAAAA,eAAJ,CAAoBoB,QAApB,CAAf,CACA,GAAME,CAAAA,KAAK,CAAGvB,MAAM,CAACwB,GAAP,CAAW,cAAX,CAAd,CACA,GAAMC,CAAAA,YAAY,CAAGzB,MAAM,CAACwB,GAAP,CAAW,YAAX,EAA2B,IAAhD,CACA,GAAME,CAAAA,WAAW,CAAGR,IAAI,CAACD,GAAL,EAApB,CACA,GAAMD,CAAAA,OAAO,CAAGU,WAAW,CAAGD,YAA9B,CACAhB,YAAY,CAACkB,OAAb,CAAqB,QAArB,CAA+Bd,IAAI,CAACe,SAAL,CAAe,CAC1CL,KAAK,CAALA,KAD0C,CAE1CP,OAAO,CAAPA,OAF0C,CAAf,CAA/B,EAIA,MAAO,KAAP,CACH,CAED,MAAO,MAAP,CACH,C,oBAGL,cAAejB,CAAAA,IAAf","sourcesContent":["const settings = {\n    clientID: 'c9587c71088b4ad78b3f54fda5ba1544',\n    redirectURI: 'http://localhost:3000/',\n    scope: encodeURIComponent('user-read-private user-read-email user-follow-read user-follow-modify user-library-read user-library-modify')\n}\n\nclass Auth {\n    static logIn() {\n        const params = new URLSearchParams({\n            client_id: settings.clientID,\n            redirect_uri: settings.redirectURI,\n            scope: settings.scope,\n            response_type: 'token'\n        }).toString();\n        window.location.href = 'https://accounts.spotify.com/authorize?' + params;\n    }\n\n    static logOut() {\n        localStorage.removeItem('access');\n        window.location.href = '/';\n    }\n\n    static check() {\n        function accessDataAvailable() {\n            const access = JSON.parse(localStorage.getItem('access'));\n            if (access) {\n                const expires = access.expires;\n                const now = Date.now();\n                return now < expires;\n            }\n            return false;\n        }\n\n        function hashAvailable() {\n            const hash = window.location.hash;\n            return hash ? true : false;\n        }\n\n        if (accessDataAvailable()) {\n            return true;\n        }\n\n        if (hashAvailable()) {\n            const hash = window.location.hash;\n            const replaced = hash.replace('#', '?');\n            const params = new URLSearchParams(replaced);\n            const token = params.get('access_token');\n            const expiresAddOn = params.get('expires_in') * 1000;\n            const expiresBase = Date.now();\n            const expires = expiresBase + expiresAddOn;\n            localStorage.setItem('access', JSON.stringify({\n                token,\n                expires\n            }));\n            return true;\n        }\n\n        return false;\n    }\n}\n\nexport default Auth;"]},"metadata":{},"sourceType":"module"}